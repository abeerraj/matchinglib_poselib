\documentclass[a4paper]{article}
\usepackage[english]{babel}
\usepackage{textcomp}
\BLOCK{ if make_index }
\usepackage{hyperref}
\BLOCK{ endif }
\usepackage{graphicx}%[pdftex] vor {} einfÃ¼gen
\usepackage{subfigure}
\usepackage{pgfplots}
\usetikzlibrary{matrix,positioning}
\pgfplotsset{width=1.\textwidth,compat=newest}%,yticklabel style={text width=3em,align=left}}
\begin{document}
\author{J. Maier}
\title{\VAR{title}}
\maketitle
\BLOCK{ if make_index }
\listoffigures
\newpage
\BLOCK{ endif }

\pgfplotscreateplotcyclelist{big variety}{
	teal,every mark/.append style={fill=teal!80!black},mark=*\\
	teal,densely dashed,every mark/.append style={fill=teal!80!black},mark=x\\
	orange,every mark/.append style={fill=orange!80!black},mark=square*\\
	orange,densely dashed,every mark/.append style={fill=orange!80!black},mark=+\\
	cyan!60!black,every mark/.append style={fill=cyan!80!black},mark=otimes*\\
	cyan!60!black,densely dashed,every mark/.append style={fill=cyan!80!black},mark=o\\
	red,every mark/.append style={fill=orange!80!black},mark=triangle*\\
	red,densely dashed,every mark/.append style={fill=orange!80!black},mark=triangle\\
	black,every mark/.append style={solid,fill=darkgray},mark=diamond*\\
	black,densely dashed,every mark/.append style={solid,fill=darkgray},mark=diamond\\
	blue,every mark/.append style={fill=blue!80!black},mark=halfdiamond*\\
	blue,densely dashed,every mark/.append style={fill=blue!80!black},mark=asterisk\\
	gray,every mark/.append style={fill=gray!90!black},mark=halfsquare right*\\
	gray,densely dashed,every mark/.append style={fill=gray!90!black},mark=10-pointed star\\
	magenta,every mark/.append style={fill=magenta!80!black},mark=halfsquare left*\\
	magenta,densely dashed,every mark/.append style={fill=magenta!80!black},mark=Mercedes star\\
	violet,every mark/.append style={fill=violet!80!black},mark=halfcircle*\\
	violet,densely dashed,every mark/.append style={fill=violet!80!black},mark=halfcircle\\
	brown!80!black,every mark/.append style={fill=brown!90!black},mark=pentagon*\\
	brown!80!black,densely dashed,every mark/.append style={fill=brown!90!black},mark=pentagon\\
	green!80!black,every mark/.append style={fill=green!90!black},mark=oplus*\\
	green!80!black,densely dashed,every mark/.append style={fill=green!90!black},mark=oplus\\
	teal,dashdotted,every mark/.append style={fill=teal!80!black},mark=oplus*\\
	orange,dashdotted,every mark/.append style={fill=orange!80!black},mark=pentagon*\\
	cyan!60!black,dashdotted,every mark/.append style={fill=cyan!80!black},mark=halfcircle*\\
	red,dashdotted,every mark/.append style={fill=orange!80!black},mark=halfsquare left*\\
	black,dashdotted,every mark/.append style={solid,fill=darkgray},mark=halfsquare right*\\
	blue,dashdotted,every mark/.append style={fill=blue!80!black},mark=halfsquare*\\
	gray,dashdotted,every mark/.append style={fill=gray!90!black},mark=diamond*\\
	magenta,dashdotted,every mark/.append style={fill=magenta!80!black},mark=triangle*\\
	violet,dashdotted,every mark/.append style={fill=violet!80!black},mark=otimes*\\
	brown!80!black,dashdotted,every mark/.append style={fill=brown!90!black},mark=square*\\
	green!80!black,dashdotted,every mark/.append style={fill=green!90!black},mark=*\\
	teal,densely dashdotdotted,every mark/.append style={fill=teal!80!black},mark=square*\\
	orange,densely dashdotdotted,every mark/.append style={fill=orange!80!black},mark=*\\
	cyan!60!black,densely dashdotdotted,every mark/.append style={fill=cyan!80!black},mark=triangle*\\
	red,densely dashdotdotted,every mark/.append style={fill=orange!80!black},mark=otimes*\\
	black,densely dashdotdotted,every mark/.append style={solid,fill=darkgray},mark=halfdiamond*\\
	blue,densely dashdotdotted,every mark/.append style={fill=blue!80!black},mark=diamond*\\
	gray,densely dashdotdotted,every mark/.append style={fill=gray!90!black},mark=oplus*\\
	magenta,densely dashdotdotted,every mark/.append style={fill=magenta!80!black},mark=halfsquare right*\\
	violet,densely dashdotdotted,every mark/.append style={fill=violet!80!black},mark=pentagon*\\
	brown!80!black,densely dashdotdotted,every mark/.append style={fill=brown!90!black},mark=halfcircle*\\
	green!80!black,densely dashdotdotted,every mark/.append style={fill=green!90!black},mark=halfsquare left*\\
}

\BLOCK{ for sec in sections}
%\section{\VAR{sec['name']}}

\BLOCK{ if make_index }
\begin{figure}
\centering
\BLOCK{ endif }
\BLOCK{ if ctrl_fig_size }
\resizebox*{!}{%
	\ifdim\height>0.95\textheight
        0.95\textheight
    \else
        \height
    \fi
}{%
\BLOCK{ endif }
\begin{tikzpicture}
\begin{axis}[
\BLOCK{ if sec['limits']['miny'] is not none }
ymin=\VAR{sec['limits']['miny']},
\BLOCK{ endif }
\BLOCK{ if sec['limits']['maxy'] is not none }
ymax=\VAR{sec['limits']['maxy']},
\BLOCK{ endif }
title=\VAR{sec['name']},
xlabel=\VAR{sec['plot_x']},
ylabel=\VAR{sec['axis_y']},
legend style={
	at={(0.5,-0.12)},
	anchor=north,
	legend columns=\VAR{sec['legend_cols']},
	},
cycle list name=big variety,
]
\BLOCK{ for it in sec['plots'] }
\addplot+ [\VAR{sec['fig_type']}\BLOCK{ if not sec['use_marks'] },no markers\BLOCK{ endif },unbounded coords=discard] table [col sep=semicolon,x=\VAR{ sec['plot_x'] },y=\VAR{ it }] {\VAR{ sec['file'] }};
\BLOCK{ endfor }

\legend{\BLOCK{ for it in sec['legend'] } \VAR{ it },\BLOCK{ endfor }}
\end{axis}
\end{tikzpicture}
\BLOCK{ if ctrl_fig_size }
}
\BLOCK{ endif }
\BLOCK{ if make_index }
\caption{\VAR{sec['name']}}
\end{figure}
\BLOCK{ endif }

\BLOCK{ endfor }

\end{document}
